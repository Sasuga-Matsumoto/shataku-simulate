<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#1E3A8A">
  <title>PLEX 福利厚生社宅 | 従業員の方へ</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;600;700&family=Noto+Sans+JP:wght@400;500;700;900&display=swap" rel="stylesheet">
  <style>
    /* ===== Variables ===== */
    :root {
      color-scheme: light;
      --dark-blue: #1E3A8A;
      --bright-blue: #3366FF;
      --accent-blue: #4A86E8;
      --medium-blue: #6D9EEB;
      --light-blue: #BFDBFE;
      --bg: #F8FAFC;
      --card-bg: #FFFFFF;
      --text: #0F172A;
      --text-light: #64748B;
      --gray: #94A3B8;
      --off-white: #F8F5F5;
      --shadow-sm: 0 1px 2px rgba(0,0,0,0.04), 0 2px 8px rgba(30,58,138,0.06);
      --shadow-md: 0 2px 4px rgba(0,0,0,0.04), 0 8px 24px rgba(30,58,138,0.08);
      --shadow-lg: 0 4px 8px rgba(0,0,0,0.04), 0 16px 40px rgba(30,58,138,0.12);
    }

    /* ===== Reset & Base ===== */
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, 'Hiragino Sans', sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
    }

    /* ===== Skip link ===== */
    .skip-link {
      position: absolute;
      top: -100%;
      left: 8px;
      z-index: 9999;
      background: var(--dark-blue);
      color: white;
      padding: 8px 16px;
      border-radius: 4px;
      font-size: 0.875rem;
      font-weight: 700;
      text-decoration: none;
    }
    .skip-link:focus { top: 8px; }

    /* ===== Scroll fade-in ===== */
    .fade-in {
      opacity: 0;
      transform: translateY(24px);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }
    .fade-in.visible { opacity: 1; transform: translateY(0); }
    .fade-in.delay-1 { transition-delay: 0.1s; }
    .fade-in.delay-2 { transition-delay: 0.2s; }
    .fade-in.delay-3 { transition-delay: 0.3s; }
    @media (prefers-reduced-motion: reduce) {
      .fade-in { opacity: 1; transform: none; transition: none; }
    }

    /* ===== Section common ===== */
    .section { padding: 64px 20px; }
    .inner { max-width: 800px; margin: 0 auto; }
    .section-label {
      font-family: 'IBM Plex Sans', sans-serif;
      font-size: 0.7rem;
      font-weight: 700;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--bright-blue);
      margin-bottom: 10px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    .section-label::before {
      content: '';
      display: inline-block;
      width: 28px;
      height: 2px;
      background: linear-gradient(90deg, var(--bright-blue), rgba(51,102,255,0.2));
      border-radius: 2px;
    }
    .section-title {
      font-size: 1.6rem;
      font-weight: 900;
      color: var(--dark-blue);
      line-height: 1.25;
      margin-bottom: 14px;
      letter-spacing: -0.01em;
      text-wrap: balance;
    }
    .section-desc {
      font-size: 0.9rem;
      color: var(--text-light);
      line-height: 1.8;
      text-wrap: pretty;
    }

    /* ===== 1. Header ===== */
    .header {
      background: rgba(255,255,255,0.92);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(30,58,138,0.08);
      padding: 14px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 1px 0 rgba(30,58,138,0.06), 0 4px 16px rgba(30,58,138,0.04);
    }
    .header-logo {
      font-family: 'IBM Plex Sans', sans-serif;
      font-size: 0.95rem;
      font-weight: 700;
      color: var(--dark-blue);
      letter-spacing: 0.01em;
    }
    .header-logo span { color: var(--bright-blue); }
    .badge-employee {
      display: inline-block;
      background: linear-gradient(135deg, var(--dark-blue), var(--bright-blue));
      color: white;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.7rem;
      font-weight: 700;
      letter-spacing: 0.04em;
    }

    /* ===== 2. Hero ===== */
    .hero {
      background: linear-gradient(155deg, #0f1f5c 0%, #1E3A8A 45%, #2952b3 100%);
      color: white;
      padding: 72px 20px 80px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    .hero::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image: radial-gradient(circle, rgba(255,255,255,0.06) 1px, transparent 1px);
      background-size: 28px 28px;
      pointer-events: none;
    }
    .hero::after {
      content: '';
      position: absolute;
      top: -120px; right: -120px;
      width: 420px; height: 420px;
      background: radial-gradient(circle, rgba(51,102,255,0.3) 0%, transparent 65%);
      pointer-events: none;
    }
    .hero-glow {
      position: absolute;
      bottom: -100px; left: -80px;
      width: 340px; height: 340px;
      background: radial-gradient(circle, rgba(164,194,244,0.15) 0%, transparent 65%);
      pointer-events: none;
    }
    .hero-title {
      font-size: 1.6rem;
      font-weight: 900;
      line-height: 1.25;
      letter-spacing: -0.02em;
      margin-bottom: 0;
      position: relative;
      z-index: 1;
      color: white;
    }
    .hero-title .sub-line {
      font-size: 1.6rem;
      font-weight: 900;
      color: rgba(255,255,255,0.92);
      letter-spacing: 0;
      display: block;
      margin-bottom: 16px;
    }
    .hero-title .amount {
      color: white;
      font-family: 'IBM Plex Sans', sans-serif;
      font-size: 6.5rem;
      display: block;
      line-height: 1.0;
      letter-spacing: -0.04em;
      text-shadow: 0 0 80px rgba(255,255,255,0.18), 0 2px 24px rgba(51,102,255,0.55), 0 8px 48px rgba(51,102,255,0.25);
    }
    .hero-title .amount-unit {
      font-family: 'Noto Sans JP', sans-serif;
      font-size: 2.4rem;
      font-weight: 700;
      vertical-align: middle;
      letter-spacing: 0;
      opacity: 0.9;
    }
    .hero-title .amount-sub {
      font-size: 1.6rem;
      font-weight: 900;
      color: rgba(255,255,255,0.88);
      display: block;
      margin-top: 20px;
      letter-spacing: -0.01em;
    }

    /* ===== 3. Benefits ===== */
    .benefits { background: white; }

    /* Sub-pitch row (3 items: 引越し不要 / 申請も簡単 / 追加費用無) */
    .sub-pitch-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-top: 28px;
      margin-bottom: 32px;
    }
    .sub-pitch-item {
      background: linear-gradient(135deg, #EEF2FF, #E8F0FE);
      border: 1px solid var(--light-blue);
      border-radius: 14px;
      padding: 18px 14px;
      text-align: center;
    }
    .sub-pitch-label {
      font-size: 0.95rem;
      font-weight: 900;
      color: var(--dark-blue);
      margin-bottom: 4px;
    }
    .sub-pitch-desc {
      font-size: 0.75rem;
      color: var(--text-light);
      line-height: 1.5;
    }

    /* Benefit cards (no icon — top accent border instead) */
    .benefits-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
    }
    .benefit-card {
      background: white;
      border-radius: 20px;
      padding: 28px 24px;
      border: 1px solid rgba(30,58,138,0.07);
      border-top: 4px solid var(--bright-blue);
      box-shadow: 0 1px 2px rgba(0,0,0,0.03), 0 4px 16px rgba(30,58,138,0.06), 0 12px 32px rgba(30,58,138,0.05);
      transition: transform 0.32s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.28s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: default;
    }
    .benefit-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 2px 4px rgba(0,0,0,0.04), 0 8px 24px rgba(30,58,138,0.10), 0 24px 48px rgba(30,58,138,0.13);
    }
    .benefit-card.card-blue  { border-top-color: #6366F1; }
    .benefit-card.card-green { border-top-color: var(--bright-blue); }
    .benefit-card.card-gold  { border-top-color: #0284C7; }
    .benefit-num {
      font-family: 'IBM Plex Sans', sans-serif;
      font-size: 1.4rem;
      font-weight: 700;
      color: #4F46E5;
      margin-bottom: 6px;
      letter-spacing: -0.01em;
    }
    .benefit-card.card-green .benefit-num { color: var(--bright-blue); }
    .benefit-card.card-gold  .benefit-num { color: #0284C7; }
    .benefit-title { font-size: 1.05rem; font-weight: 700; color: var(--dark-blue); margin-bottom: 10px; }
    .benefit-desc { font-size: 0.85rem; color: var(--text-light); line-height: 1.75; }

    /* ===== 4. Slides (image carousel) ===== */
    .slides-section {
      background: linear-gradient(180deg, var(--bg) 0%, #edf0fb 100%);
    }
    .slides-wrapper {
      position: relative;
      margin-top: 28px;
      border-radius: 16px;
      box-shadow: 0 4px 28px rgba(35,65,140,0.13);
      overflow: hidden;
      background: white;
      touch-action: pan-y;
      user-select: none;
      cursor: grab;
    }
    .slides-wrapper.dragging { cursor: grabbing; }
    .slide-img-wrap img { pointer-events: none; -webkit-user-drag: none; }
    .slides-track {
      display: flex;
      transition: transform 0.42s cubic-bezier(0.4, 0, 0.2, 1);
      will-change: transform;
    }
    .slide-img-wrap {
      min-width: 100%;
      position: relative;
    }
    .slide-img-wrap img {
      width: 100%;
      height: auto;
      display: block;
      aspect-ratio: 16/9;
      object-fit: contain;
      background: white;
    }
    .slide-counter {
      position: absolute;
      top: 10px;
      right: 12px;
      background: rgba(0,0,0,0.45);
      color: white;
      font-size: 0.72rem;
      font-weight: 700;
      padding: 3px 10px;
      border-radius: 10px;
      backdrop-filter: blur(4px);
    }
    /* Slide navigation */
    .slides-nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      background: var(--bg);
      border-top: 1px solid #E8EDF5;
    }
    .slide-btn {
      width: 40px; height: 40px;
      border-radius: 50%;
      border: 2px solid var(--light-blue);
      background: white;
      color: var(--dark-blue);
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      transition: background 0.18s, border-color 0.18s, color 0.18s;
      flex-shrink: 0;
    }
    .slide-btn:hover:not(:disabled) {
      background: var(--bright-blue);
      border-color: var(--bright-blue);
      color: white;
    }
    .slide-btn:disabled { opacity: 0.3; cursor: not-allowed; }
    .slide-btn:focus-visible { outline: 3px solid var(--bright-blue); outline-offset: 2px; }
    .slides-dot-area {
      display: flex;
      align-items: center;
      gap: 5px;
      flex-wrap: wrap;
      justify-content: center;
      flex: 1;
      padding: 0 10px;
    }
    .slide-dot {
      width: 7px; height: 7px;
      border-radius: 50%;
      background: var(--light-blue);
      cursor: pointer;
      border: none; padding: 0;
      transition: width 0.2s, border-radius 0.2s, background 0.2s;
      flex-shrink: 0;
    }
    .slide-dot.active {
      width: 20px;
      border-radius: 4px;
      background: var(--bright-blue);
    }
    .slide-dot:focus-visible { outline: 3px solid var(--bright-blue); outline-offset: 3px; }
    .slide-hint {
      font-size: 0.72rem;
      color: var(--text-light);
      text-align: center;
      margin-top: 10px;
    }

    /* ===== 5. Simulator (GAS-equivalent) ===== */
    .simulator { background: white; }

    /* 2-column layout */
    .sim-layout {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
      margin-top: 24px;
      align-items: start;
    }
    @media (min-width: 640px) {
      .sim-layout { grid-template-columns: 1fr 1fr; }
    }

    /* Promo panel */
    .sim-promo {
      background: linear-gradient(150deg, var(--dark-blue) 0%, #2952b3 100%);
      border-radius: 16px;
      padding: 32px 24px;
      color: white;
      position: relative;
      overflow: hidden;
    }
    .sim-promo::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image: radial-gradient(circle, rgba(255,255,255,0.07) 1px, transparent 1px);
      background-size: 22px 22px;
      pointer-events: none;
    }
    .sim-promo > * { position: relative; }
    .sim-promo-eyebrow {
      font-size: 0.72rem;
      font-weight: 700;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      opacity: 0.75;
      margin-bottom: 14px;
    }
    .sim-promo-headline {
      font-size: 1.35rem;
      font-weight: 900;
      line-height: 1.6;
    }
    .sim-promo-num {
      font-size: 2.4rem;
      font-weight: 900;
      display: inline-block;
      line-height: 1.15;
    }
    .sim-promo-sub {
      margin-top: 16px;
      font-size: 1rem;
      font-weight: 700;
      opacity: 0.9;
    }
    .sim-promo-note {
      margin-top: 8px;
      font-size: 0.8rem;
      opacity: 0.65;
      line-height: 1.65;
    }

    /* Input card */
    .sim-input-card {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 24px;
      box-shadow: var(--shadow-md);
      border: 1px solid rgba(30,58,138,0.07);
    }
    .input-group { margin-bottom: 16px; }
    .input-group label {
      display: block;
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--text-light);
      margin-bottom: 6px;
    }
    .input-with-unit { display: flex; align-items: center; gap: 8px; }
    .input-with-unit input { flex: 1; min-width: 0; }
    .input-unit {
      font-size: 15px;
      color: #999;
      white-space: nowrap;
      flex-shrink: 0;
    }
    .input-group input,
    .input-group select {
      width: 100%;
      padding: 12px 14px;
      font-size: 16px;
      font-family: inherit;
      border: 1.5px solid #CBD5E1;
      border-radius: 10px;
      background: white;
      color: var(--text);
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    .input-group input:hover,
    .input-group select:hover { border-color: #94A3B8; }
    .input-group select {
      -webkit-appearance: none;
      appearance: none;
    }
    .input-group input:focus,
    .input-group select:focus {
      outline: none;
      border-color: var(--bright-blue);
      box-shadow: 0 0 0 3px rgba(51,102,255,0.12), 0 1px 4px rgba(51,102,255,0.12);
    }
    .input-group select {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%2323418C' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 14px center;
      padding-right: 38px;
    }
    .error-msg { color: #d32f2f; font-size: 0.85rem; min-height: 1.2em; margin-top: 4px; }
    .calc-btn {
      display: block;
      width: 100%;
      padding: 15px;
      margin-top: 8px;
      font-size: 1rem;
      font-weight: 700;
      letter-spacing: 0.02em;
      font-family: inherit;
      color: white;
      background: linear-gradient(135deg, var(--dark-blue) 0%, var(--bright-blue) 100%);
      border: none;
      border-radius: 10px;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: transform 0.22s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.22s ease, opacity 0.18s;
      box-shadow: 0 2px 8px rgba(51,102,255,0.25), 0 1px 2px rgba(0,0,0,0.08);
    }
    .calc-btn::after {
      content: '';
      position: absolute;
      top: 0; left: -80%;
      width: 60%; height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.22), transparent);
      transform: skewX(-20deg);
    }
    .calc-btn:hover::after {
      animation: btn-shimmer 0.55s ease forwards;
    }
    @keyframes btn-shimmer {
      from { left: -80%; }
      to   { left: 160%; }
    }
    @media (prefers-reduced-motion: reduce) {
      .calc-btn::after { display: none; }
    }
    .calc-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(51,102,255,0.38), 0 2px 4px rgba(0,0,0,0.08);
    }
    .calc-btn:active { opacity: 0.88; transform: translateY(0); }
    .calc-btn:focus-visible { outline: 3px solid white; outline-offset: 3px; }

    /* Results */
    #sim-results { display: none; }
    .savings-callout {
      text-align: center;
      padding: 28px 20px;
      background: linear-gradient(135deg, var(--dark-blue) 0%, #2952b3 100%);
      border-radius: 16px;
      margin: 16px 0;
      position: relative;
      overflow: hidden;
    }
    .savings-callout::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image: radial-gradient(circle, rgba(255,255,255,0.08) 1px, transparent 1px);
      background-size: 20px 20px;
      pointer-events: none;
    }
    .savings-callout::after {
      content: '';
      position: absolute;
      bottom: -40px; right: -40px;
      width: 160px; height: 160px;
      background: radial-gradient(circle, rgba(255,255,255,0.07) 0%, transparent 70%);
      pointer-events: none;
    }
    .savings-badge {
      display: inline-block;
      background: rgba(255,255,255,0.2);
      color: white;
      font-weight: 700;
      font-size: 0.78rem;
      padding: 4px 16px;
      border-radius: 20px;
      margin-bottom: 16px;
      letter-spacing: 0.06em;
      border: 1px solid rgba(255,255,255,0.3);
      position: relative;
    }
    .savings-row { display: flex; justify-content: center; gap: 32px; flex-wrap: wrap; position: relative; }
    .savings-divider {
      width: 1px;
      background: rgba(255,255,255,0.25);
      align-self: stretch;
    }
    .savings-item { text-align: center; }
    .savings-item .s-label { font-size: 0.8rem; color: rgba(255,255,255,0.75); margin-bottom: 4px; }
    .savings-item .s-value {
      font-family: 'IBM Plex Sans', sans-serif;
      font-size: 2rem;
      font-weight: 700;
      color: white;
      letter-spacing: -0.02em;
    }
    .savings-item .s-unit { font-size: 1rem; font-weight: 500; color: rgba(255,255,255,0.85); }

    /* Bar chart */
    .chart-card {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 12px;
      box-shadow: var(--shadow-sm);
      border: 1px solid rgba(30,58,138,0.07);
    }
    .chart-container {
      display: flex;
      justify-content: center;
      align-items: stretch;
      gap: 12px;
      padding: 20px 8px 0;
    }
    .chart-column {
      display: flex;
      flex-direction: column;
      align-items: center;
      flex: 1;
      max-width: 180px;
    }
    .chart-label {
      font-size: 0.82rem;
      font-weight: 700;
      color: white;
      margin-bottom: 10px;
      text-align: center;
      padding: 5px 14px;
      background: var(--dark-blue);
      border-radius: 20px;
      white-space: nowrap;
      letter-spacing: 0.02em;
    }
    .bar-wrapper {
      width: 100%;
      height: 449px;
      display: flex;
      flex-direction: column;
      border-radius: 6px 6px 0 0;
      overflow: hidden;
    }
    .bar-segment {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }
    .seg-label { font-size: 0.8rem; color: var(--off-white); font-weight: 600; line-height: 1.3; text-align: center; }
    .seg-value { font-size: 0.95rem; color: var(--off-white); font-weight: 700; line-height: 1.4; }
    .seg-note  { font-size: 0.8rem; color: var(--off-white); font-weight: 600; line-height: 1.3; text-align: center; }
    .seg-tax      { background: var(--gray); }
    .seg-rent     { background: var(--medium-blue); }
    .seg-realnet  { background: var(--bright-blue); }
    .seg-reduction{ background: var(--accent-blue); }
    .chart-center {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      align-self: center;
      padding: 0 2px;
      min-width: 50px;
      flex-shrink: 0;
    }
    .arrow-icon {
      display: flex; align-items: center; justify-content: center;
      animation: bounce 1.5s ease-in-out infinite;
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
    }
    @media (prefers-reduced-motion: reduce) {
      .arrow-icon { animation: none; }
    }
    .chart-center .up-label {
      font-size: 0.8rem;
      font-weight: 700;
      color: var(--bright-blue);
      white-space: nowrap;
      margin-top: 4px;
    }
    .chart-annotation {
      font-size: 0.7rem;
      color: var(--text-light);
      text-align: center;
      margin-top: 4px;
      padding: 2px 6px;
      background: #f0f0f0;
      border-radius: 4px;
    }

    /* Detail table */
    .detail-card {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 8px;
      box-shadow: var(--shadow-sm);
      border: 1px solid rgba(30,58,138,0.07);
    }
    .detail-card table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.85rem;
    }
    .detail-card thead th {
      padding: 8px 6px 10px;
      font-size: 0.75rem;
      font-weight: 700;
      letter-spacing: 0.05em;
      color: var(--text-light);
      border-bottom: 2px solid #E2E8F0;
      text-align: center;
    }
    .detail-card thead th:first-child { text-align: left; }
    .detail-card tbody td {
      padding: 10px 6px;
      border-bottom: 1px solid #F1F5F9;
    }
    .td-label { font-weight: 500; font-size: 0.82rem; color: var(--text-light); }
    .td-value { text-align: right; font-variant-numeric: tabular-nums; font-family: 'IBM Plex Sans', sans-serif; }
    .td-accent { color: var(--bright-blue); font-weight: 600; }
    .row-highlight { background: linear-gradient(to right, #EFF6FF, #EEF2FF); border-radius: 8px; }
    .row-highlight .td-label { font-weight: 700; color: var(--text); font-size: 0.86rem; }
    .row-highlight .td-value { font-weight: 700; }
    .row-highlight .td-accent { font-size: 1.05rem; color: var(--bright-blue); }

    .sim-disclaimer {
      font-size: 0.7rem;
      color: #999;
      text-align: center;
      padding: 8px 4px 4px;
      line-height: 1.55;
    }

    /* Responsive for bars */
    @media (min-width: 600px) {
      .bar-wrapper { height: 528px; }
      .seg-label { font-size: 0.85rem; }
      .seg-value { font-size: 1rem; }
      .savings-item .s-value { font-size: 1.8rem; }
      .arrow-icon svg { width: 34px; height: 34px; }
    }
    @media (max-width: 380px) {
      .bar-wrapper { height: 370px; }
      .chart-container { gap: 4px; }
      .seg-label { font-size: 0.7rem; }
      .seg-value { font-size: 0.8rem; }
      .savings-item .s-value { font-size: 1.2rem; }
      .chart-center { min-width: 40px; }
      .arrow-icon svg { width: 22px; height: 22px; }
    }

    /* ===== 6. Testimonials ===== */
    .testimonials { background: var(--bg); }
    .testimonials-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
      margin-top: 32px;
    }
    .testi-card {
      background: white;
      border-radius: 20px;
      padding: 28px 24px 24px;
      border: 1px solid rgba(30,58,138,0.08);
      box-shadow: var(--shadow-sm);
      position: relative;
      overflow: hidden;
      transition: transform 0.32s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.28s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .testi-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 2px 4px rgba(0,0,0,0.04), 0 8px 24px rgba(30,58,138,0.10), 0 20px 40px rgba(30,58,138,0.10);
    }
    .testi-card::before {
      content: '\201C';
      position: absolute;
      top: 12px; left: 18px;
      font-size: 5rem;
      line-height: 1;
      color: var(--light-blue);
      font-family: Georgia, serif;
      pointer-events: none;
    }
    .testi-profile {
      font-size: 0.75rem;
      color: var(--text-light);
      font-weight: 600;
      margin-bottom: 12px;
      position: relative;
      padding-top: 28px;
    }
    .testi-quote {
      font-size: 1rem;
      font-weight: 700;
      color: var(--dark-blue);
      line-height: 1.55;
      margin-bottom: 10px;
      position: relative;
    }
    .testi-body { font-size: 0.83rem; color: var(--text-light); line-height: 1.75; }

    /* ===== 7. Flow ===== */
    .flow-section { background: white; }
    .flow-steps { display: flex; flex-direction: column; gap: 0; }
    .flow-step {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      padding-bottom: 24px;
      position: relative;
    }
    .flow-step:not(:last-child)::before {
      content: '';
      position: absolute;
      left: 19px; top: 40px; bottom: 0;
      width: 2px;
      background: linear-gradient(to bottom, var(--light-blue), transparent);
    }
    .flow-num {
      width: 40px; height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--dark-blue), var(--bright-blue));
      color: white;
      font-weight: 700; font-size: 1rem;
      display: flex; align-items: center; justify-content: center;
      flex-shrink: 0;
      box-shadow: 0 2px 8px rgba(30,58,138,0.25), 0 0 0 3px rgba(30,58,138,0.08);
    }
    .flow-content { padding-top: 8px; flex: 1; }
    .flow-title { font-size: 1rem; font-weight: 700; color: var(--dark-blue); margin-bottom: 4px; }
    .flow-desc { font-size: 0.85rem; color: var(--text-light); line-height: 1.65; }
    .tag { display: inline-block; padding: 1px 7px; border-radius: 4px; font-size: 0.68rem; font-weight: 700; margin-left: 5px; vertical-align: middle; }
    .tag-you { background: #EEF2FF; color: var(--bright-blue); }
    .tag-co  { background: #E8F4EC; color: #167a48; }

    /* ===== 8. Mechanism ===== */
    .mechanism { background: var(--bg); }
    .mech-card {
      background: white;
      border-radius: 18px;
      padding: 24px;
      margin-top: 28px;
      border: 1px solid #E8EDF5;
    }
    .mech-compare { display: grid; grid-template-columns: 1fr auto 1fr; gap: 8px; align-items: center; margin-bottom: 24px; }
    .mech-box { border-radius: 12px; padding: 16px 12px; text-align: center; }
    .mech-box.before { background: #F5F7FB; border: 1px solid #E0E8F5; }
    .mech-box.after  { background: linear-gradient(135deg, #EEF2FF, #E8F0FE); border: 1px solid var(--light-blue); }
    .mech-box-tag { font-size: 0.68rem; font-weight: 700; letter-spacing: 0.06em; text-transform: uppercase; color: var(--text-light); margin-bottom: 6px; }
    .mech-box.after .mech-box-tag { color: var(--bright-blue); }
    .mech-box-value { font-size: 0.9rem; font-weight: 700; color: var(--dark-blue); line-height: 1.4; }
    .mech-center-arrow { font-size: 1.4rem; color: var(--bright-blue); text-align: center; }
    .mech-flow-chain {
      display: flex; flex-wrap: wrap; align-items: center; gap: 6px;
      padding-top: 20px; border-top: 1px solid #E8EDF5; justify-content: center;
    }
    .mech-chip { background: linear-gradient(135deg, var(--dark-blue), var(--bright-blue)); color: white; border-radius: 8px; padding: 8px 12px; font-size: 0.76rem; font-weight: 700; text-align: center; }
    .mech-chip.green { background: linear-gradient(135deg, #167a48, #22b860); }
    .mech-arr { color: var(--bright-blue); font-weight: 700; }
    .mech-supplement { margin-top: 18px; padding: 14px; background: var(--bg); border-radius: 10px; font-size: 0.82rem; color: var(--text-light); line-height: 1.65; }
    .mech-supplement strong { color: var(--dark-blue); }

    /* ===== 9. FAQ ===== */
    .faq-section { background: white; }
    .faq-list { display: flex; flex-direction: column; gap: 8px; margin-top: 32px; }
    .faq-item { background: white; border-radius: 14px; border: 1px solid rgba(30,58,138,0.08); overflow: hidden; box-shadow: 0 1px 2px rgba(0,0,0,0.03), 0 2px 8px rgba(30,58,138,0.05); transition: box-shadow 0.25s cubic-bezier(0.4, 0, 0.2, 1), border-color 0.25s; }
    .faq-item:hover { box-shadow: 0 2px 4px rgba(0,0,0,0.04), 0 6px 20px rgba(30,58,138,0.09); border-color: rgba(30,58,138,0.14); }
    .faq-item.open { border-color: rgba(51,102,255,0.2); box-shadow: 0 2px 4px rgba(0,0,0,0.04), 0 6px 20px rgba(51,102,255,0.10); }
    .faq-q {
      width: 100%; text-align: left; padding: 18px 20px;
      background: none; border: none; font-family: inherit;
      font-size: 0.9rem; font-weight: 700; color: var(--dark-blue);
      cursor: pointer; display: flex; align-items: center; justify-content: space-between; gap: 12px; line-height: 1.4;
      transition: background 0.15s;
    }
    .faq-q:hover { background: rgba(51,102,255,0.03); }
    .faq-q:focus-visible { outline: 3px solid var(--bright-blue); outline-offset: -3px; }
    .faq-icon { width: 26px; height: 26px; border-radius: 50%; background: #EFF6FF; color: var(--bright-blue); display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 0.9rem; font-weight: 700; transition: background 0.2s, color 0.2s, transform 0.25s; }
    .faq-item.open .faq-icon { background: var(--bright-blue); color: white; transform: rotate(45deg); }
    .faq-answer { max-height: 0; overflow: hidden; transition: max-height 0.38s cubic-bezier(0.4, 0, 0.2, 1); }
    .faq-item.open .faq-answer { max-height: 400px; }
    .faq-answer-inner { padding: 14px 20px 20px; font-size: 0.875rem; color: var(--text-light); line-height: 1.8; border-top: 1px solid #F1F5F9; }

    /* ===== 10. Demerits ===== */
    .demerits { background: #F8F9FC; border-top: 1px solid #E8EDF5; }
    .demerit-card { background: white; border-radius: 18px; padding: 24px; margin-top: 24px; border: 1px solid #E8EDF5; }
    .demerit-item { display: flex; align-items: flex-start; gap: 12px; padding: 14px 0; border-bottom: 1px solid #F0F4FF; }
    .demerit-item:last-child { border-bottom: none; }
    .demerit-dot { width: 7px; height: 7px; border-radius: 50%; background: #aaa; margin-top: 7px; flex-shrink: 0; }
    .demerit-text { font-size: 0.875rem; color: var(--text); line-height: 1.7; }
    .demerit-conclusion { background: linear-gradient(135deg, #EEF2FF, #E8F0FE); border-radius: 12px; padding: 18px 20px; margin-top: 20px; font-size: 0.92rem; font-weight: 700; color: var(--dark-blue); text-align: center; line-height: 1.55; }

    /* ===== 11. Footer ===== */
    .footer {
      background: #0B1845;
      color: rgba(255,255,255,0.45);
      text-align: center;
      padding: 40px 20px;
      font-size: 0.78rem;
      border-top: 1px solid rgba(255,255,255,0.06);
    }
    .footer-logo {
      font-family: 'IBM Plex Sans', sans-serif;
      font-size: 0.9rem;
      font-weight: 700;
      color: rgba(255,255,255,0.7);
      margin-bottom: 10px;
      letter-spacing: 0.04em;
    }

    /* ===== Responsive ===== */
    @media (min-width: 640px) {
      .section-title { font-size: 1.9rem; }
      .hero-title .amount { font-size: 9.5rem; }
      .hero-title .amount-unit { font-size: 3.5rem; }
      .benefits-grid { grid-template-columns: repeat(3, 1fr); }
      .testimonials-grid { grid-template-columns: repeat(3, 1fr); }
    }
    @media (max-width: 480px) {
      .sub-pitch-grid { grid-template-columns: repeat(3, 1fr); gap: 8px; }
      .sub-pitch-label { font-size: 0.82rem; }
      .sub-pitch-desc { font-size: 0.68rem; }
      .sub-pitch-item { padding: 14px 8px; }
    }
    @media (min-width: 800px) {
      .section { padding: 80px 40px; }
    }
  </style>
</head>
<body>
  <a href="#main-content" class="skip-link">コンテンツにスキップ</a>

  <!-- 1. Header -->
  <header class="header">
    <div class="header-logo">PLEX <span>福利厚生社宅</span></div>
  </header>

  <main id="main-content">
  <!-- 2. Hero -->
  <section class="hero">
    <div class="hero-glow"></div>
    <h1 class="hero-title">
      <span class="sub-line">「あなたの手取り、まだ増やせます。」</span>
      <span class="amount"><span class="amount-unit">年間</span>20<span class="amount-unit">万円</span></span>
      <span class="amount-sub">引越し不要・費用ゼロ・申込書1枚</span>
    </h1>
  </section>

  <!-- 3. Benefits -->
  <section class="section benefits">
    <div class="inner">
      <div class="section-label">メリット</div>
      <h2 class="section-title">3つのメリット</h2>
      <p class="section-desc" style="margin-bottom: 28px;">福利厚生社宅は、引越しも追加費用もなく使えるお得な制度です。</p>

      <div class="benefits-grid">
        <div class="benefit-card card-blue fade-in">
          <div class="benefit-num">+月1〜5万円</div>
          <div class="benefit-title">手取りUP</div>
          <div class="benefit-desc">月収・家賃によって異なりますが、毎月10,000〜50,000円程度の手取り増加が期待できます。年間にすると12〜60万円の差になります。</div>
        </div>
        <div class="benefit-card card-green fade-in delay-1">
          <div class="benefit-num">今の部屋のまま</div>
          <div class="benefit-title">引越し不要</div>
          <div class="benefit-desc">名義を個人から法人に変えるだけ。引越し不要で、今お住まいのお部屋がそのまま社宅になります。追加費用もゼロです。</div>
        </div>
        <div class="benefit-card card-gold fade-in delay-2">
          <div class="benefit-num">申込書1枚</div>
          <div class="benefit-title">手間なし</div>
          <div class="benefit-desc">申込フォームの記入と賃貸契約書の提出（スマホ写真OK）だけ。あとの書類手続きは会社とPLEXが代行します。</div>
        </div>
      </div>
    </div>
  </section>

  <!-- 4. Slides (image carousel: 17 slides from PPTX) -->
  <section class="section slides-section">
    <div class="inner">
      <div class="section-label">しくみをざっくり理解</div>
      <h2 class="section-title">1分でわかる<br>福利厚生社宅</h2>
      <p class="section-desc">スライドを読むだけで制度の概要がわかります。左右にスワイプまたはボタンで切り替えてください。</p>
      <div class="slides-wrapper fade-in">
        <div class="slides-track" id="slides-track">
          <div class="slide-img-wrap"><img src="slides/slide_01.png" alt="福利厚生社宅制度" loading="eager" fetchpriority="high" width="1920" height="1080"><span class="slide-counter">1 / 17</span></div>
          <div class="slide-img-wrap"><img src="slides/slide_02.png" alt="制度の対象者" loading="lazy" width="1920" height="1080"><span class="slide-counter">2 / 17</span></div>
          <div class="slide-img-wrap"><img src="slides/slide_03.png" alt="制度の仕組み" loading="lazy" width="1920" height="1080"><span class="slide-counter">3 / 17</span></div>
          <div class="slide-img-wrap"><img src="slides/slide_04.png" alt="給料組み換えの仕組み" loading="lazy" width="1920" height="1080"><span class="slide-counter">4 / 17</span></div>
          <div class="slide-img-wrap"><img src="slides/slide_05.png" alt="手取りアップの例" loading="lazy" width="1920" height="1080"><span class="slide-counter">5 / 17</span></div>
          <div class="slide-img-wrap"><img src="slides/slide_06.png" alt="経済的メリットの概算例" loading="lazy" width="1920" height="1080"><span class="slide-counter">6 / 17</span></div>
          <div class="slide-img-wrap"><img src="slides/slide_07.png" alt="減額反映のタイミング" loading="lazy" width="1920" height="1080"><span class="slide-counter">7 / 17</span></div>
          <div class="slide-img-wrap"><img src="slides/slide_08.png" alt="給与明細のイメージ" loading="lazy" width="1920" height="1080"><span class="slide-counter">8 / 17</span></div>
          <div class="slide-img-wrap"><img src="slides/slide_09.png" alt="その他メリット" loading="lazy" width="1920" height="1080"><span class="slide-counter">9 / 17</span></div>
          <div class="slide-img-wrap"><img src="slides/slide_10.png" alt="デメリット" loading="lazy" width="1920" height="1080"><span class="slide-counter">10 / 17</span></div>
          <div class="slide-img-wrap"><img src="slides/slide_11.png" alt="ご利用方法" loading="lazy" width="1920" height="1080"><span class="slide-counter">11 / 17</span></div>
          <div class="slide-img-wrap"><img src="slides/slide_12.png" alt="利用開始までの流れ" loading="lazy" width="1920" height="1080"><span class="slide-counter">12 / 17</span></div>
          <div class="slide-img-wrap"><img src="slides/slide_13.png" alt="Step1 利用申請" loading="lazy" width="1920" height="1080"><span class="slide-counter">13 / 17</span></div>
          <div class="slide-img-wrap"><img src="slides/slide_14.png" alt="Step2 必要書類の提出" loading="lazy" width="1920" height="1080"><span class="slide-counter">14 / 17</span></div>
          <div class="slide-img-wrap"><img src="slides/slide_15.png" alt="Step3 条件確認・Step4 契約手続き" loading="lazy" width="1920" height="1080"><span class="slide-counter">15 / 17</span></div>
          <div class="slide-img-wrap"><img src="slides/slide_16.png" alt="解約の方法" loading="lazy" width="1920" height="1080"><span class="slide-counter">16 / 17</span></div>
          <div class="slide-img-wrap"><img src="slides/slide_17.png" alt="お問い合わせ" loading="lazy" width="1920" height="1080"><span class="slide-counter">17 / 17</span></div>
        </div>
        <div class="slides-nav">
          <button class="slide-btn" id="slide-prev" aria-label="前のスライド">&#8592;</button>
          <div class="slides-dot-area" id="slide-dots"></div>
          <button class="slide-btn" id="slide-next" aria-label="次のスライド">&#8594;</button>
        </div>
      </div>
      <p class="slide-hint">← スワイプまたはボタンで切り替え →</p>
    </div>
  </section>

  <!-- 5. Simulator (GAS-equivalent: salary + rent + prefecture → bar chart + table) -->
  <section class="section simulator">
    <div class="inner">
      <div class="section-label">手取りシミュレーター</div>
      <h2 class="section-title">あなたの手取り増加を<br>計算してみよう</h2>
      <p class="section-desc">月収・家賃・お住まいの都道府県を入力してシミュレーション実行。棒グラフで視覚的に比較できます。</p>

      <div class="sim-layout fade-in">
        <div class="sim-promo">
          <p class="sim-promo-headline">
            毎月<span class="sim-promo-num">1.7</span>万円、<br>
            年間<span class="sim-promo-num">20</span>万円の<br>
            手取りアップを実現しませんか？
          </p>
          <p class="sim-promo-sub">毎月・年間の手取りアップ金額を計算してみよう</p>
          <p class="sim-promo-note">※ シミュレーション結果は概算の金額です。</p>
        </div>

        <div class="sim-input-card">
          <div class="input-group">
            <label for="salary">月収（額面の金額）</label>
            <div class="input-with-unit">
              <input type="number" id="salary" name="salary" autocomplete="off" inputmode="numeric" placeholder="300000" step="10000" min="0" value="300000">
              <span class="input-unit">円</span>
            </div>
          </div>
          <div class="input-group">
            <label for="rent">賃料（共益費・管理費を含む）</label>
            <div class="input-with-unit">
              <input type="number" id="rent" name="rent" autocomplete="off" inputmode="numeric" placeholder="80000" step="1000" min="0" value="80000">
              <span class="input-unit">円</span>
            </div>
          </div>
          <div class="input-group">
            <label for="prefecture">勤務地の都道府県</label>
            <select id="prefecture" name="prefecture" autocomplete="off">
              <option value="">選択してください</option>
            </select>
          </div>
          <div class="error-msg" id="error-msg"></div>
          <button id="calc-btn" class="calc-btn">シミュレーション実行</button>
        </div>
      </div>

      <div id="sim-results">
        <div class="savings-callout">
          <div class="savings-badge">手取りUP</div>
          <div class="savings-row">
            <div class="savings-item">
              <div class="s-label">毎月</div>
              <div class="s-value">+<span id="output-monthly">0</span><span class="s-unit">円</span></div>
            </div>
            <div class="savings-divider"></div>
            <div class="savings-item">
              <div class="s-label">毎年</div>
              <div class="s-value">+<span id="output-annual">0</span><span class="s-unit">円</span></div>
            </div>
          </div>
        </div>

        <div class="chart-card">
          <div class="chart-container">
            <div class="chart-column">
              <div class="chart-label">今の賃貸の方</div>
              <div class="bar-wrapper" id="bar-left"></div>
              <div class="chart-annotation">課税対象の<br>現金給与</div>
            </div>
            <div class="chart-center">
              <div class="arrow-icon">
                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                  <path d="M14 2L5 13H11V26H17V13H23L14 2Z" fill="#3366FF"/>
                </svg>
              </div>
              <div class="up-label">手取りUP</div>
            </div>
            <div class="chart-column">
              <div class="chart-label">福利厚生社宅</div>
              <div class="bar-wrapper" id="bar-right"></div>
              <div class="chart-annotation">課税対象の<br>現金給与が減少</div>
            </div>
          </div>
        </div>

        <div class="detail-card">
          <div id="detail-table"></div>
        </div>

        <p class="sim-disclaimer">
          ※ 本シミュレーションは概算であり、実際の金額とは異なる場合があります。<br>
          ※ 令和7年度の税率・保険料率に基づいています。<br>
          ※ 扶養控除・配偶者控除等の個別控除は考慮していません。
        </p>
      </div>
    </div>
  </section>

  <!-- 6. Testimonials -->
  <section class="section testimonials">
    <div class="inner">
      <div class="section-label">ユーザーボイス</div>
      <h2 class="section-title">利用者の声</h2>
      <div class="testimonials-grid">
        <div class="testi-card fade-in">
          <div class="testi-profile">20代・男性 / 営業職</div>
          <div class="testi-quote">月2万円増えたので、NISAを始めました。</div>
          <div class="testi-body">将来への備えができて、老後の不安がだいぶ薄れました。手取りが増えるだけでこんなに気持ちが楽になるとは思っていなかったです。</div>
        </div>
        <div class="testi-card fade-in delay-1">
          <div class="testi-profile">30代・男性 / マーケティング職</div>
          <div class="testi-quote">手続きは申込書を出しただけ。とても簡単でした。</div>
          <div class="testi-body">「どうせ面倒くさいだろう」と思っていましたが、契約書をスマホで撮って送っただけで終わりました。翌月からしれっと手取りが増えていてびっくりしました。</div>
        </div>
        <div class="testi-card fade-in delay-2">
          <div class="testi-profile">20代・女性 / 事務職</div>
          <div class="testi-quote">やめたくなったら1ヶ月で解約できる。</div>
          <div class="testi-body">「縛られる」イメージがあったけど、1ヶ月前に申し出ればいつでも解約できると聞いて気軽に始めました。</div>
        </div>
      </div>
    </div>
  </section>

  <!-- 7. Flow -->
  <section class="section flow-section">
    <div class="inner">
      <div class="section-label">申込みの流れ</div>
      <h2 class="section-title">4ステップで完了</h2>
      <p class="section-desc" style="margin-bottom: 28px;">あなたが動くのは最初の2ステップだけ。あとは会社とPLEXにお任せください。</p>
      <div class="flow-steps">
        <div class="flow-step fade-in">
          <div class="flow-num">1</div>
          <div class="flow-content">
            <div class="flow-title">申込書を記入する<span class="tag tag-you">あなた</span></div>
            <div class="flow-desc">会社から届く申込フォーム（紙またはオンライン）に必要事項を記入します。5分程度で完了します。</div>
          </div>
        </div>
        <div class="flow-step fade-in delay-1">
          <div class="flow-num">2</div>
          <div class="flow-content">
            <div class="flow-title">書類を提出する<span class="tag tag-you">あなた</span></div>
            <div class="flow-desc">現在お住まいの賃貸借契約書をスマホで撮影して送るだけ。難しい手続きは一切ありません。</div>
          </div>
        </div>
        <div class="flow-step fade-in delay-2">
          <div class="flow-num">3</div>
          <div class="flow-content">
            <div class="flow-title">名義変更の確認<span class="tag tag-co">弊社</span></div>
            <div class="flow-desc">PLEXが大家さんとの名義変更交渉を行います。変更可否・条件についてご連絡します。</div>
          </div>
        </div>
        <div class="flow-step fade-in delay-3">
          <div class="flow-num">4</div>
          <div class="flow-content">
            <div class="flow-title">契約手続き<span class="tag tag-co">弊社</span></div>
            <div class="flow-desc">面倒な契約書類の手続きはすべて代行します。完了後、翌月から手取りが増えた状態でお給料が支払われます。</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 8. Mechanism -->
  <section class="section mechanism">
    <div class="inner">
      <div class="section-label">福利厚生社宅のしくみ</div>
      <h2 class="section-title">手取りアップの仕組み</h2>
      <div class="mech-card fade-in">
        <img src="mechanism.png" alt="手取りアップの仕組み" width="800" height="450" style="width:100%;height:auto;border-radius:8px;display:block;">
      </div>
    </div>
  </section>

  <!-- 9. FAQ -->
  <section class="section faq-section">
    <div class="inner">
      <div class="section-label">よくある質問</div>
      <h2 class="section-title">FAQ</h2>
      <div class="faq-list">
        <div class="faq-item">
          <button class="faq-q">引越しは必要ですか？<span class="faq-icon">+</span></button>
          <div class="faq-answer"><div class="faq-answer-inner">引越しは一切不要です。今お住まいのお部屋のまま利用できます。名義が「あなた個人」から「会社」に変わるだけで、お部屋の場所・間取り・家賃はそのままです。</div></div>
        </div>
        <div class="faq-item">
          <button class="faq-q">今の部屋のまま申し込めますか？<span class="faq-icon">+</span></button>
          <div class="faq-answer"><div class="faq-answer-inner">はい、今お住まいのお部屋で申し込めます。ただし、大家さん（管理会社）が法人契約への変更を認める必要があります。物件によっては対応できない場合もありますが、ほとんどの物件は可能なのでご安心ください。</div></div>
        </div>
        <div class="faq-item">
          <button class="faq-q">申込みは強制ですか？<span class="faq-icon">+</span></button>
          <div class="faq-answer"><div class="faq-answer-inner">強制ではありません。完全に任意の制度です。申し込まなくても、給与・待遇に影響はありません。ご自身の状況（ライフプラン・退職予定など）を考慮した上でご判断ください。</div></div>
        </div>
        <div class="faq-item">
          <button class="faq-q">いつでもやめられますか？<span class="faq-icon">+</span></button>
          <div class="faq-answer"><div class="faq-answer-inner">はい、1ヶ月前の申し出で解約できます。解約手数料等のペナルティはありません。ライフスタイルや状況が変わった際にも柔軟に対応できます。</div></div>
        </div>
        <div class="faq-item">
          <button class="faq-q">転職した場合はどうなりますか？<span class="faq-icon">+</span></button>
          <div class="faq-answer"><div class="faq-answer-inner">転職先の会社も同じ制度を採用している場合は、引き続き利用できます。転職により制度が使えなくなる場合は、退職時に名義を個人に戻す手続きが発生しますが、PLEXがサポートします。</div></div>
        </div>
        <div class="faq-item">
          <button class="faq-q">年収が下がって困ることはありませんか？<span class="faq-icon">+</span></button>
          <div class="faq-answer"><div class="faq-answer-inner">課税ベースの給与が下がるため、①将来の年金受取額が若干減少（月30万・5年利用で月約1,000円強）、②育児休業給付・傷病手当などの給付が下がる場合があります。近い将来に退職・育休・長期休職を予定している方はご注意ください。</div></div>
        </div>
      </div>
    </div>
  </section>

  <!-- 10. Demerits -->
  <section class="section demerits">
    <div class="inner">
      <div class="section-label" style="color:#999;">注意事項</div>
      <h2 class="section-title" style="color:#555;">注意事項</h2>
      <p class="section-desc">以下に当てはまる方はよくご検討の上でお申込みください。</p>
      <div class="demerit-card fade-in">
        <div class="demerit-item">
          <div class="demerit-dot"></div>
          <div class="demerit-text"><strong>将来の年金受取額が少し減る可能性があります。</strong>月30万円・5年間利用した場合、将来の年金受取額は月1,000円強の減少と試算されます。当然リターンの方が大きくなります。</div>
        </div>
        <div class="demerit-item">
          <div class="demerit-dot"></div>
          <div class="demerit-text"><strong>育児休業給付・傷病手当金等の手当が下がる可能性があります。</strong>課税ベースの給与を基準に計算されるため、利用中は給付額が減る場合があります。そのため、近々育休を取得予定の方は利用は推奨しておりません。</div>
        </div>
        <div class="demerit-item">
          <div class="demerit-dot"></div>
          <div class="demerit-text"><strong>近い将来に退職・長期休職を予定している方には推奨しません。</strong>退職前後の手当・給付に影響する可能性があります。転職：正規に給与を把握する企業はほとんどいないため、転職先には本制度を利用しており標準額の上の給与の把握は難しいと言えます。ローン：近々ローンを考えている方は持ち家を検討している方が多いため本制度利用対象外になることが多いですが、会社からの収入証明書を発行することでおよそ解決可能です。</div>
        </div>
      </div>
    </div>
  </section>

  </main>
  <!-- 11. Footer -->
  <footer class="footer">
    <div class="footer-logo">PLEX 福利厚生社宅</div>
    <p>©2026 株式会社プレックス All rights reserved.</p>
  </footer>

<script>
// ===== 都道府県別健康保険料率（令和7年度 協会けんぽ） =====
var PREFECTURE_RATES = {
  '北海道': 0.1031, '青森県': 0.0985, '岩手県': 0.0962,
  '宮城県': 0.1011, '秋田県': 0.1001, '山形県': 0.0975,
  '福島県': 0.0962, '茨城県': 0.0967, '栃木県': 0.0982,
  '群馬県': 0.0977, '埼玉県': 0.0976, '千葉県': 0.0979,
  '東京都': 0.0991, '神奈川県': 0.0992, '新潟県': 0.0955,
  '富山県': 0.0965, '石川県': 0.0988, '福井県': 0.0994,
  '山梨県': 0.0989, '長野県': 0.0969, '岐阜県': 0.0993,
  '静岡県': 0.0980, '愛知県': 0.1003, '三重県': 0.0999,
  '滋賀県': 0.0997, '京都府': 0.1003, '大阪府': 0.1024,
  '兵庫県': 0.1016, '奈良県': 0.1002, '和歌山県': 0.1019,
  '鳥取県': 0.0993, '島根県': 0.0994, '岡山県': 0.1017,
  '広島県': 0.0997, '山口県': 0.1036, '徳島県': 0.1047,
  '香川県': 0.1021, '愛媛県': 0.1018, '高知県': 0.1013,
  '福岡県': 0.1031, '佐賀県': 0.1078, '長崎県': 0.1041,
  '熊本県': 0.1012, '大分県': 0.1025, '宮崎県': 0.1009,
  '鹿児島県': 0.1031, '沖縄県': 0.0944
};

var REGION_PREFS = [
  { region: '北海道', prefs: ['北海道'] },
  { region: '東北', prefs: ['青森県','岩手県','宮城県','秋田県','山形県','福島県'] },
  { region: '関東', prefs: ['茨城県','栃木県','群馬県','埼玉県','千葉県','東京都','神奈川県'] },
  { region: '中部', prefs: ['新潟県','富山県','石川県','福井県','山梨県','長野県','岐阜県','静岡県','愛知県','三重県'] },
  { region: '近畿', prefs: ['滋賀県','京都府','大阪府','兵庫県','奈良県','和歌山県'] },
  { region: '中国', prefs: ['鳥取県','島根県','岡山県','広島県','山口県'] },
  { region: '四国', prefs: ['徳島県','香川県','愛媛県','高知県'] },
  { region: '九州・沖縄', prefs: ['福岡県','佐賀県','長崎県','熊本県','大分県','宮崎県','鹿児島県','沖縄県'] }
];

// ===== 標準報酬月額テーブル =====
var REMUNERATION_TABLE = [
  [58000,0,63000],[68000,63000,73000],[78000,73000,83000],
  [88000,83000,93000],[98000,93000,101000],[104000,101000,107000],
  [110000,107000,114000],[118000,114000,122000],[126000,122000,130000],
  [134000,130000,138000],[142000,138000,146000],[150000,146000,155000],
  [160000,155000,165000],[170000,165000,175000],[180000,175000,185000],
  [190000,185000,195000],[200000,195000,210000],[220000,210000,230000],
  [240000,230000,250000],[260000,250000,270000],[280000,270000,290000],
  [300000,290000,310000],[320000,310000,330000],[340000,330000,350000],
  [360000,350000,370000],[380000,370000,395000],[410000,395000,425000],
  [440000,425000,455000],[470000,455000,485000],[500000,485000,515000],
  [530000,515000,545000],[560000,545000,575000],[590000,575000,605000],
  [620000,605000,635000],[650000,635000,665000],[680000,665000,695000],
  [710000,695000,730000],[750000,730000,770000],[790000,770000,810000],
  [830000,810000,855000],[880000,855000,905000],[930000,905000,955000],
  [980000,955000,1005000],[1030000,1005000,1055000],[1090000,1055000,1115000],
  [1150000,1115000,1175000],[1210000,1175000,1235000],[1270000,1235000,1295000],
  [1330000,1295000,1355000],[1390000,1355000,Infinity]
];
var PENSION_RATE_HALF = 0.0915;
var PENSION_CAP_MONTHLY = 650000;
var HEALTH_CAP_MONTHLY = 1390000;
var EMPLOYMENT_RATE = 0.006;
var HEALTH_BONUS_CAP = 5730000;
var PENSION_BONUS_CAP_PER = 1500000;
var RESIDENT_TAX_RATE = 0.1;
var RESIDENT_TAX_FLAT = 5000;
var RESIDENT_TAX_BASIC_DEDUCTION = 430000;

function lookupStandardMonthly(salary) {
  if (salary <= 0) return REMUNERATION_TABLE[0][0];
  for (var i = 0; i < REMUNERATION_TABLE.length; i++) {
    if (salary >= REMUNERATION_TABLE[i][1] && salary < REMUNERATION_TABLE[i][2]) return REMUNERATION_TABLE[i][0];
  }
  return REMUNERATION_TABLE[REMUNERATION_TABLE.length - 1][0];
}
function calcSalaryDeduction(a) {
  if (a <= 1900000) return 650000;
  if (a <= 3600000) return a * 0.3 + 80000;
  if (a <= 6600000) return a * 0.2 + 440000;
  if (a <= 8500000) return a * 0.1 + 1100000;
  return 1950000;
}
function calcBasicDeductionIncomeTax(e) {
  if (e <= 1320000) return 950000;
  if (e <= 3360000) return 880000;
  if (e <= 4890000) return 680000;
  if (e <= 6550000) return 630000;
  if (e <= 23500000) return 580000;
  if (e <= 24000000) return 480000;
  if (e <= 24500000) return 320000;
  if (e <= 25000000) return 160000;
  return 0;
}
function calcIncomeTaxBracket(t) {
  if (t <= 1949000) return { rate: 0.05, deduction: 0 };
  if (t <= 3299000) return { rate: 0.10, deduction: 97500 };
  if (t <= 6949000) return { rate: 0.20, deduction: 427500 };
  if (t <= 8999000) return { rate: 0.23, deduction: 636000 };
  if (t <= 17999000) return { rate: 0.33, deduction: 1536000 };
  if (t <= 39999000) return { rate: 0.40, deduction: 2796000 };
  return { rate: 0.45, deduction: 4796000 };
}
function calcScenario(monthlySalary, rent, reductionRatio, healthRate) {
  var effectiveMonthly = monthlySalary - rent * reductionRatio;
  var annualIncome = effectiveMonthly * 12;
  var stdMonthly = lookupStandardMonthly(effectiveMonthly);
  var healthMonthly = Math.min(stdMonthly, HEALTH_CAP_MONTHLY) * healthRate * 0.5;
  var pensionMonthly = Math.min(stdMonthly, PENSION_CAP_MONTHLY) * PENSION_RATE_HALF;
  var employmentMonthly = effectiveMonthly * EMPLOYMENT_RATE;
  var siMonthly = healthMonthly + pensionMonthly + employmentMonthly;
  var totalSI = siMonthly * 12;
  var salaryDeduction = calcSalaryDeduction(annualIncome);
  var earnedIncome = annualIncome - salaryDeduction;
  var taxableResident = Math.max(0, earnedIncome - totalSI - RESIDENT_TAX_BASIC_DEDUCTION);
  var residentTax = Math.round(taxableResident * RESIDENT_TAX_RATE + RESIDENT_TAX_FLAT);
  var basicDeductionIT = calcBasicDeductionIncomeTax(earnedIncome);
  var taxableIT = Math.max(0, earnedIncome - totalSI - basicDeductionIT);
  var bracket = calcIncomeTaxBracket(taxableIT);
  var incomeTax = Math.max(0, taxableIT * bracket.rate - bracket.deduction);
  var totalDeductions = totalSI + residentTax + incomeTax;
  var housingCost = (1 - reductionRatio) * rent * 12;
  var netAnnual = annualIncome - totalDeductions;
  var realNetAnnual = netAnnual - housingCost;
  return {
    effectiveMonthly: effectiveMonthly,
    annualIncome: annualIncome,
    stdMonthly: stdMonthly,
    totalSI: totalSI,
    residentTax: residentTax,
    incomeTax: incomeTax,
    totalDeductions: totalDeductions,
    housingCost: housingCost,
    netAnnual: netAnnual,
    realNetAnnual: realNetAnnual,
    netMonthly: netAnnual / 12,
    realNetMonthly: realNetAnnual / 12
  };
}
function calculate(monthlySalary, rent, prefecture) {
  var healthRate = PREFECTURE_RATES[prefecture];
  var without   = calcScenario(monthlySalary, rent, 0.0, healthRate);
  var withSystem = calcScenario(monthlySalary, rent, 0.8, healthRate);
  return {
    without: without,
    withSystem: withSystem,
    monthlyIncrease: Math.round(withSystem.realNetMonthly - without.realNetMonthly),
    annualIncrease:  Math.round(withSystem.realNetMonthly - without.realNetMonthly) * 12
  };
}
function formatYen(n) { return Math.round(n).toLocaleString('ja-JP'); }
function formatMan(n) { return (Math.round(n / 10000 * 10) / 10).toFixed(1); }

// Bar chart rendering
function renderBars(result, rent, monthlySalary) {
  var w = result.without, s = result.withSystem;
  var taxW = monthlySalary - rent - w.realNetMonthly;
  var taxS = monthlySalary - rent - s.realNetMonthly;
  var leftSegs = [
    { cls: 'seg-tax',     label: '税金・社保', sub: formatMan(Math.max(0, taxW)) + '万円', pct: 20 },
    { cls: 'seg-rent',    label: '家賃',       sub: formatMan(rent) + '万円',             pct: 30 },
    { cls: 'seg-realnet', label: '実質手取り', sub: formatMan(w.realNetMonthly) + '万円', pct: 50 }
  ];
  var rightSegs = [
    { cls: 'seg-reduction', label: '給与減額',         sub: formatMan(rent * 0.8) + '万円', note: '（賃料の80%）', pct: 20 },
    { cls: 'seg-tax',       label: '税金・社保',        sub: formatMan(Math.max(0, taxS)) + '万円',              pct: 18 },
    { cls: 'seg-rent',      label: '家賃（賃料の20%）', sub: formatMan(rent * 0.2) + '万円',                     pct: 8  },
    { cls: 'seg-realnet',   label: '実質手取り',        sub: formatMan(s.realNetMonthly) + '万円',               pct: 54 }
  ];
  buildBar(document.getElementById('bar-left'),  leftSegs);
  buildBar(document.getElementById('bar-right'), rightSegs);
}
function buildBar(container, segments) {
  container.innerHTML = '';
  for (var i = 0; i < segments.length; i++) {
    var seg = segments[i];
    var div = document.createElement('div');
    div.className = 'bar-segment ' + seg.cls;
    div.style.flex = '0 0 ' + seg.pct + '%';
    div.innerHTML = '<span class="seg-label">' + seg.label + '</span>' +
      '<span class="seg-value">' + seg.sub + '</span>' +
      (seg.note ? '<span class="seg-note">' + seg.note + '</span>' : '');
    container.appendChild(div);
  }
}

// Detail table rendering
function renderDetailTable(result, rent, monthlySalary) {
  var w = result.without, s = result.withSystem;
  var rows = [
    ['月収（額面）',   formatYen(monthlySalary),                     formatYen(Math.round(s.effectiveMonthly))],
    ['社会保険料',     formatYen(Math.round(w.totalSI / 12)),         formatYen(Math.round(s.totalSI / 12))],
    ['住民税',         formatYen(Math.round(w.residentTax / 12)),     formatYen(Math.round(s.residentTax / 12))],
    ['所得税',         formatYen(Math.round(w.incomeTax / 12)),       formatYen(Math.round(s.incomeTax / 12))],
    ['家賃',           formatYen(rent),                               formatYen(Math.round(rent * 0.2))],
    ['実質手取り月額', formatYen(Math.round(w.realNetMonthly)),        formatYen(Math.round(s.realNetMonthly))]
  ];
  var html = '<table><thead><tr><th></th><th>今の賃貸</th><th>福利厚生社宅</th></tr></thead><tbody>';
  for (var i = 0; i < rows.length; i++) {
    var r = rows[i];
    var hi = (i === rows.length - 1);
    html += '<tr' + (hi ? ' class="row-highlight"' : '') + '>';
    html += '<td class="td-label">' + r[0] + '</td>';
    html += '<td class="td-value">' + r[1] + '円</td>';
    html += '<td class="td-value td-accent">' + r[2] + '円</td>';
    html += '</tr>';
  }
  html += '</tbody></table>';
  document.getElementById('detail-table').innerHTML = html;
}

function runCalculation() {
  var salary = parseInt(document.getElementById('salary').value) || 0;
  var rent   = parseInt(document.getElementById('rent').value)   || 0;
  var pref   = document.getElementById('prefecture').value;
  document.getElementById('error-msg').textContent = '';
  if (salary <= 0 || rent <= 0 || !pref) {
    document.getElementById('sim-results').style.display = 'none';
    return;
  }
  if (rent >= salary) {
    document.getElementById('error-msg').textContent = '賃料は月額支給額未満にしてください。';
    document.getElementById('sim-results').style.display = 'none';
    return;
  }
  if (rent * 0.8 >= salary) {
    document.getElementById('error-msg').textContent = '賃料が高すぎます。月額支給額の80%以上の家賃には対応していません。';
    document.getElementById('sim-results').style.display = 'none';
    return;
  }
  var result = calculate(salary, rent, pref);
  document.getElementById('output-monthly').textContent = formatYen(result.monthlyIncrease);
  document.getElementById('output-annual').textContent  = formatYen(result.annualIncrease);
  renderBars(result, rent, salary);
  renderDetailTable(result, rent, salary);
  document.getElementById('sim-results').style.display = 'block';
  document.getElementById('sim-results').scrollIntoView({ behavior: 'smooth', block: 'start' });
}

// ===== Slide carousel (17 images) =====
var TOTAL_SLIDES = 17;
var currentSlide = 0;
var track = document.getElementById('slides-track');
var dotsArea = document.getElementById('slide-dots');
var prevBtn = document.getElementById('slide-prev');
var nextBtn = document.getElementById('slide-next');

// Build dots dynamically
(function() {
  for (var i = 0; i < TOTAL_SLIDES; i++) {
    var d = document.createElement('button');
    d.className = 'slide-dot' + (i === 0 ? ' active' : '');
    d.setAttribute('aria-label', 'スライド' + (i + 1));
    d.setAttribute('data-idx', i);
    dotsArea.appendChild(d);
  }
})();

function goTo(n) {
  currentSlide = Math.max(0, Math.min(n, TOTAL_SLIDES - 1));
  track.style.transform = 'translateX(-' + (currentSlide * 100) + '%)';
  dotsArea.querySelectorAll('.slide-dot').forEach(function(d, i) {
    d.classList.toggle('active', i === currentSlide);
  });
  prevBtn.disabled = (currentSlide === 0);
  nextBtn.disabled = (currentSlide === TOTAL_SLIDES - 1);
}

prevBtn.addEventListener('click', function() { goTo(currentSlide - 1); });
nextBtn.addEventListener('click', function() { goTo(currentSlide + 1); });
dotsArea.addEventListener('click', function(e) {
  var idx = e.target.getAttribute('data-idx');
  if (idx !== null) goTo(parseInt(idx));
});
goTo(0);

// Pointer-based swipe/drag (mouse + touch unified)
var pointerStartX = 0, pointerStartY = 0, isDragging = false;
var slidesWrapper = document.querySelector('.slides-wrapper');

slidesWrapper.addEventListener('pointerdown', function(e) {
  if (e.target.closest('.slide-btn, .slide-dot')) return;
  pointerStartX = e.clientX;
  pointerStartY = e.clientY;
  isDragging = true;
  slidesWrapper.setPointerCapture(e.pointerId);
  slidesWrapper.classList.add('dragging');
});
slidesWrapper.addEventListener('pointermove', function(e) {
  if (!isDragging) return;
  // Suppress click-like movement noise
});
slidesWrapper.addEventListener('pointerup', function(e) {
  if (!isDragging) return;
  isDragging = false;
  slidesWrapper.classList.remove('dragging');
  var dx = pointerStartX - e.clientX;
  var dy = Math.abs(pointerStartY - e.clientY);
  if (Math.abs(dx) > 40 && Math.abs(dx) > dy) {
    if (dx > 0) goTo(currentSlide + 1);
    else         goTo(currentSlide - 1);
  }
});
slidesWrapper.addEventListener('pointercancel', function() {
  isDragging = false;
  slidesWrapper.classList.remove('dragging');
});

// ===== FAQ accordion =====
document.querySelectorAll('.faq-q').forEach(function(btn) {
  btn.addEventListener('click', function() {
    var item   = btn.parentElement;
    var isOpen = item.classList.contains('open');
    document.querySelectorAll('.faq-item').forEach(function(i) { i.classList.remove('open'); });
    if (!isOpen) item.classList.add('open');
  });
});

// ===== Scroll fade-in =====
var observer = new IntersectionObserver(function(entries) {
  entries.forEach(function(e) {
    if (e.isIntersecting) { e.target.classList.add('visible'); observer.unobserve(e.target); }
  });
}, { threshold: 0.12 });
document.querySelectorAll('.fade-in').forEach(function(el) { observer.observe(el); });

// ===== Init: prefecture select + default calc-btn =====
document.addEventListener('DOMContentLoaded', function() {
  var select = document.getElementById('prefecture');
  REGION_PREFS.forEach(function(rg) {
    var group = document.createElement('optgroup');
    group.label = rg.region;
    rg.prefs.forEach(function(p) {
      var opt = document.createElement('option');
      opt.value = p;
      opt.textContent = p;
      if (p === '東京都') opt.selected = true;
      group.appendChild(opt);
    });
    select.appendChild(group);
  });
  document.getElementById('calc-btn').addEventListener('click', runCalculation);
});
</script>
</body>
</html>
